<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>一个视频主观质量对比脚本 &mdash; 林间</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/primer-markdown/dist/user-content.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://0qinghao.github.io/20230727-video-subjective-quality-demo/"><link rel="alternate" type="application/atom+xml" title="林间" href="https://0qinghao.github.io/feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/favicon.ico"><meta property="og:title" content="一个视频主观质量对比脚本"><meta name="keywords" content="平均主观分数, MOS, 主观质量"><meta name="og:keywords" content="平均主观分数, MOS, 主观质量"><meta name="description" content="最近开发了几个提升 H265 主观质量的算法，需要做个 demo 进行展示。mentor 以前采用的方案是使用开发板，写了个简单的应用程序使其同时解码多个码流，拼接好后输出到 HDMI 接口。我有点嫌弃搭建环境太过麻烦，还需要准备串口，因此自己撸了一个 Windows 下的脚本，调用 ffmpeg 实现。整体效果不错，而且使用起来也比较方便，唯一的不足是 ffmpeg 软解速度远远比不上开发板，4 路 1080p 播放的情况下，大约只能做到 10 fps。"><meta name="og:description" content="最近开发了几个提升 H265 主观质量的算法，需要做个 demo 进行展示。mentor 以前采用的方案是使用开发板，写了个简单的应用程序使其同时解码多个码流，拼接好后输出到 HDMI 接口。我有点嫌弃搭建环境太过麻烦，还需要准备串口，因此自己撸了一个 Windows 下的脚本，调用 ffmpeg 实现。整体效果不错，而且使用起来也比较方便，唯一的不足是 ffmpeg 软解速度远远比不上开发板，4 路 1080p 播放的情况下，大约只能做到 10 fps。"><meta property="og:url" content="https://0qinghao.github.io/20230727-video-subjective-quality-demo/"><meta property="og:site_name" content="林间"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2023-07-27"> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://0qinghao.github.io/" title="林间"><span class="octicon octicon-mark-github"></span> 林间</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://0qinghao.github.io/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://0qinghao.github.io/ja_page/" class=" site-header-nav-item" target="" title="每日一词">每日一词</a> <a href="https://0qinghao.github.io/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://0qinghao.github.io/archives/" class=" site-header-nav-item" target="" title="归档">归档</a> <a href="https://0qinghao.github.io/open-source/" class=" site-header-nav-item" target="" title="开源">开源</a> <a href="https://0qinghao.github.io/links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="https://0qinghao.github.io/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="一个视频主观质量对比脚本"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collecleon-title"><h1 class="collection-header">一个视频主观质量对比脚本</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2023/07/27 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://0qinghao.github.io/categories/#video codec" title="video codec">video codec</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://0qinghao.github.io/categories/#MOS" title="MOS">MOS</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://0qinghao.github.io/categories/#powershell" title="powershell">powershell</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 6328 字，约 19 分钟 </span></div></div></div><div class="column one-fourths mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths"><article class="article-content markdown-body"><p>最近开发了几个提升 H265 主观质量的算法，需要做个 demo 进行展示。mentor 以前采用的方案是使用开发板，写了个简单的应用程序使其同时解码多个码流，拼接好后输出到 HDMI 接口。我有点嫌弃搭建环境太过麻烦，还需要准备串口，因此自己撸了一个 Windows 下的脚本，调用 ffmpeg 实现。整体效果不错，而且使用起来也比较方便，唯一的不足是 ffmpeg 软解速度远远比不上开发板，4 路 1080p 播放的情况下，大约只能做到 10 fps。</p><h1 id="关于主观质量评价">关于主观质量评价</h1><p>在视频编解码领域，主观质量评价是衡量视频编码器性能的重要方法之一。与实验室环境中通过 JCTVC/JVET 标准测试序列计算 BD-Rate 不同，工业界更关注视频的主观质量，即平均主观分数 (Mean Opinion Score, MOS)。MOS 是通过让一组观察者在不知情的情况下观看并评分多组视频序列，从而评估编码器性能的指标。</p><p>标准文档中详细描述了主观质量评价的流程，通常采用 A/B 对比或交叉播放的方式。然而，为了增强对比效果，我们在测试中采用了同时播放多个编码器生成的视频序列的方法。这种方法不仅直观，而且能够更有效地展示不同编码器的性能差异。</p><p>需要注意的是，许多中高端显示设备自带图像优化滤镜，这些滤镜可能会影响主观质量评价的准确性。因此，在进行测试前，务必检查并关闭所有图像优化功能，以确保测试结果的客观性和准确性。</p><p>通过这种方式，我们能够更全面地评估视频编码器的主观质量表现，从而为算法的优化和改进提供可靠的数据支持。</p><h1 id="一个用于主观评价的脚本">一个用于主观评价的脚本</h1><p>前面配置码流路径的一大部分不重要，核心命令都在 ffmpeg 的复杂滤波器部分了。描述起来倒也简单，只需要把多个输入依次裁剪、缩放，然后把他们依次放在指定坐标即可。</p><p><strong>ffmpeg 命令中的 -filter_complex 部分解释</strong></p><ol><li><code class="language-plaintext highlighter-rouge">nullsrc=size=$sw</code>x$sh<code class="language-plaintext highlighter-rouge">:rate=25[base]</code>:<ul><li>创建一个空白视频源，大小为 <code class="language-plaintext highlighter-rouge">$sw</code> x <code class="language-plaintext highlighter-rouge">$sh</code>，帧率为 25。这个空白视频源作为基础图层。</li></ul></li><li><code class="language-plaintext highlighter-rouge">[0:v]crop=1920:1080:0:0,scale=$($sw/2):$($sh/2):$special_cfg0[0:tmp]</code>:<ul><li>对第一个输入视频流进行裁剪，裁剪后的大小为 1920x1080。</li><li>将裁剪后的视频流缩放到屏幕的一半大小（$sw/2 x $sh/2）。</li><li>应用 <code class="language-plaintext highlighter-rouge">$special_cfg0</code> 中的特殊配置（如果有）。</li><li>将处理后的视频流命名为 <code class="language-plaintext highlighter-rouge">[0:tmp]</code>。</li><li>重复上述步骤，得到 <code class="language-plaintext highlighter-rouge">[1:tmp]</code> <code class="language-plaintext highlighter-rouge">[2:tmp]</code> <code class="language-plaintext highlighter-rouge">[3:tmp]</code></li></ul></li><li><code class="language-plaintext highlighter-rouge">[base][0:tmp]overlay=0:0[a]</code>:<ul><li>将第一个处理后的视频流 <code class="language-plaintext highlighter-rouge">[0:tmp]</code> 叠加到基础图层 <code class="language-plaintext highlighter-rouge">[base]</code> 的左上角 (0,0) 位置。</li><li>将结果命名为 <code class="language-plaintext highlighter-rouge">[a]</code>。</li></ul></li><li><code class="language-plaintext highlighter-rouge">[a][1:tmp]overlay=$($sw/2):0[b]</code>:<ul><li>将第二个处理后的视频流 <code class="language-plaintext highlighter-rouge">[1:tmp]</code> 叠加到 <code class="language-plaintext highlighter-rouge">[a]</code> 的右上角 ($sw/2,0) 位置。</li><li>将结果命名为 <code class="language-plaintext highlighter-rouge">[b]</code>。</li></ul></li><li><code class="language-plaintext highlighter-rouge">[b][2:tmp]overlay=0:$($sh/2)[c]</code>:<ul><li>将第三个处理后的视频流 <code class="language-plaintext highlighter-rouge">[2:tmp]</code> 叠加到 <code class="language-plaintext highlighter-rouge">[b]</code> 的左下角 (0,$sh/2) 位置。</li><li>将结果命名为 <code class="language-plaintext highlighter-rouge">[c]</code>。</li></ul></li><li><code class="language-plaintext highlighter-rouge">[c][3:tmp]overlay=$($sw/2):$($sh/2)[d]</code>:<ul><li>将第四个处理后的视频流 <code class="language-plaintext highlighter-rouge">[3:tmp]</code> 叠加到 <code class="language-plaintext highlighter-rouge">[c]</code> 的右下角 ($sw/2,$sh/2) 位置。</li><li>将结果命名为 <code class="language-plaintext highlighter-rouge">[d]</code>。</li></ul></li><li><code class="language-plaintext highlighter-rouge">[d]setpts=25/$speed*PTS</code>:<ul><li>调整最终视频流的播放速度，速度由 <code class="language-plaintext highlighter-rouge">$speed</code> 参数决定。</li></ul></li></ol><p>通过这些滤镜，脚本将四个输入视频流裁剪、缩放并拼接成一个 2x2 的网格，并调整播放速度，最终生成一个合成视频流。</p><p>ffplay 部分主要是给多个画面增加标注，如不需要也可简化复杂滤波器部分。</p><p>脚本运行后的界面类似如下，可以方便地对比多个画面。</p><p><img src="/assets/images/2024-12-20-15-38-00.png" alt="" /></p><div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># stream folder, stream suffix, label</span><span class="w">
</span><span class="c"># 2x2 raster</span><span class="w">
</span><span class="nv">$f0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"T:\xxxxxxx\CBR2M"</span><span class="w">
</span><span class="nv">$f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"T:\xxxxxxx\VBRL"</span><span class="w">
</span><span class="nv">$f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"T:\xxxxxxx\VBRM"</span><span class="w">
</span><span class="nv">$f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"T:\xxxxxxx\VBRH"</span><span class="w">

</span><span class="nv">$suffix0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_cbr_2M.h265"</span><span class="w">
</span><span class="nv">$suffix1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_vbrL_2M.h265"</span><span class="w">
</span><span class="nv">$suffix2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_vbrM_2M.h265"</span><span class="w">
</span><span class="nv">$suffix3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_vbrH_2M.h265"</span><span class="w">

</span><span class="c">### 如果要求调整画面顺序, 只修改这部分 start ###</span><span class="w">
</span><span class="c"># Get seq name, cat string</span><span class="w">
</span><span class="nv">$seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="nv">$stm0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$f0</span><span class="s2">\</span><span class="nv">$seq</span><span class="s2">\</span><span class="nv">$seq$suffix0</span><span class="s2">"</span><span class="w">
</span><span class="nv">$stm1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$f1</span><span class="s2">\</span><span class="nv">$seq</span><span class="s2">\</span><span class="nv">$seq$suffix1</span><span class="s2">"</span><span class="w">
</span><span class="nv">$stm2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$f2</span><span class="s2">\</span><span class="nv">$seq</span><span class="s2">\</span><span class="nv">$seq$suffix2</span><span class="s2">"</span><span class="w">
</span><span class="nv">$stm3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$f3</span><span class="s2">\</span><span class="nv">$seq</span><span class="s2">\</span><span class="nv">$seq$suffix3</span><span class="s2">"</span><span class="w">

</span><span class="c"># Set labels</span><span class="w">
</span><span class="nv">$label0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cbr 2M"</span><span class="w">
</span><span class="nv">$label1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbrl 2M"</span><span class="w">
</span><span class="nv">$label2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbrm 2M"</span><span class="w">
</span><span class="nv">$label3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbrh 2M"</span><span class="w">

</span><span class="c"># Special configurations</span><span class="w">
</span><span class="nv">$special_cfg0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="nv">$special_cfg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="nv">$special_cfg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="nv">$special_cfg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="c"># $special_cfg0 = "out_range=full"</span><span class="w">
</span><span class="c"># $special_cfg1 = "out_range=full"</span><span class="w">
</span><span class="c"># $special_cfg2 = "out_range=full"</span><span class="w">
</span><span class="c"># $special_cfg3 = "out_range=full"</span><span class="w">

</span><span class="c"># Check if PTv3 stream exists</span><span class="w">
</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$stm0</span><span class="w"> </span><span class="nt">-PathType</span><span class="w"> </span><span class="nx">Leaf</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$stm0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$stm0</span><span class="w"> </span><span class="o">-replace</span><span class="w"> </span><span class="s2">"PTv3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"PTv2"</span><span class="w">
    </span><span class="nv">$label0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$label0</span><span class="w"> </span><span class="o">-replace</span><span class="w"> </span><span class="s2">"PTv3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"PTv2"</span><span class="w">
    </span><span class="nv">$special_cfg0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$special_cfg0</span><span class="s2">,setpts=2*PTS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="c">### 如果要求调整画面顺序, 只修改这部分 end ###</span><span class="w">

</span><span class="c"># Set play speed (=25 normal; &lt;25 slow; &gt;25 fast(limited by hardware))</span><span class="w">
</span><span class="nv">$speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="w">

</span><span class="c"># ffmpeg / ffplay paths</span><span class="w">
</span><span class="nv">$ffmpeg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:\Users\rin.lin\ffmpeg\bin\ffmpeg.exe"</span><span class="w">
</span><span class="nv">$ffplay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:\Users\rin.lin\ffmpeg\bin\ffplay.exe"</span><span class="w">

</span><span class="c"># Set screen size</span><span class="w">
</span><span class="nv">$sw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="nv">$sh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">

</span><span class="c"># Font configuration</span><span class="w">
</span><span class="nv">$label_font_common_cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fontfile=simhei.ttf:fontsize=</span><span class="si">$(</span><span class="nv">$sw</span><span class="n">/50</span><span class="p">):</span><span class="n">fontcolor</span><span class="o">=</span><span class="n">red</span><span class="s2">"

# ffmpeg command
</span><span class="nv">$ffmpegCommand</span><span class="s2"> = @"</span><span class="w">
</span><span class="s2">"</span><span class="nv">$ffmpeg</span><span class="s2">"</span><span class="w"> </span><span class="nt">-i</span><span class="w"> </span><span class="s2">"</span><span class="nv">$stm0</span><span class="s2">"</span><span class="w"> </span><span class="nt">-i</span><span class="w"> </span><span class="s2">"</span><span class="nv">$stm1</span><span class="s2">"</span><span class="w"> </span><span class="nt">-i</span><span class="w"> </span><span class="s2">"</span><span class="nv">$stm2</span><span class="s2">"</span><span class="w"> </span><span class="nt">-i</span><span class="w"> </span><span class="s2">"</span><span class="nv">$stm3</span><span class="s2">"</span><span class="w"> </span><span class="nt">-filter_complex</span><span class="w"> </span><span class="s2">"nullsrc=size=</span><span class="nv">$sw</span><span class="se">`x</span><span class="nv">$sh</span><span class="se">`:</span><span class="s2">rate=25[base]; [0:v]crop=1920:1080:0:0,scale=</span><span class="si">$(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">):</span><span class="nv">$special_cfg0</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">tmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">crop</span><span class="o">=</span><span class="mi">1920</span><span class="p">:</span><span class="mi">1080</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">):</span><span class="nv">$special_cfg1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">tmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">crop</span><span class="o">=</span><span class="mi">1920</span><span class="p">:</span><span class="mi">1080</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">):</span><span class="nv">$special_cfg2</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="n">tmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">crop</span><span class="o">=</span><span class="mi">1920</span><span class="p">:</span><span class="mi">1080</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">):</span><span class="nv">$special_cfg3</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="n">tmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">base</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="n">tmp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">0</span><span class="p">[</span><span class="n">a</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="n">tmp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="n">0</span><span class="p">[</span><span class="n">b</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="n">tmp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="n">c</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">3</span><span class="p">:</span><span class="n">tmp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="n">d</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">d</span><span class="p">]</span><span class="n">setpts</span><span class="o">=</span><span class="mi">25</span><span class="n">/</span><span class="nv">$speed</span><span class="o">*</span><span class="nx">PTS</span><span class="s2">" -f avi -c:v rawvideo -pix_fmt yuv420p -
"</span><span class="err">@</span><span class="w">

</span><span class="c"># ffplay command</span><span class="w">
</span><span class="nv">$ffplayCommand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sh">@"
"</span><span class="nv">$ffplay</span><span class="sh">" -vf "drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="sh">text=%{frame_num}:x=(w-tw)/2:y=h-lh,drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="sh">text=</span><span class="nv">$label0</span><span class="se">`:</span><span class="sh">x=0:y=0,drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="sh">text=</span><span class="nv">$label1</span><span class="se">`:</span><span class="sh">x=</span><span class="si">$(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">drawtext</span><span class="o">=</span><span class="nv">$label_font_common_cfg</span><span class="err">`</span><span class="p">:</span><span class="n">text</span><span class="o">=</span><span class="nv">$label2</span><span class="err">`</span><span class="p">:</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">y</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">),</span><span class="n">drawtext</span><span class="o">=</span><span class="nv">$label_font_common_cfg</span><span class="err">`</span><span class="p">:</span><span class="n">text</span><span class="o">=</span><span class="nv">$label3</span><span class="err">`</span><span class="p">:</span><span class="n">x</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="n">y</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)</span><span class="s2">" -noframedrop -left 9999 -fs -
"</span><span class="err">@</span><span class="w">

</span><span class="c"># powershell 的管道操作很难处理, 交给 cmd 去运行</span><span class="w">
</span><span class="nv">$cmdCommand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$ffmpegCommand</span><span class="s2"> | </span><span class="nv">$ffplayCommand</span><span class="s2">"</span><span class="w">
</span><span class="n">cmd</span><span class="w"> </span><span class="nx">/c</span><span class="w"> </span><span class="nv">$cmdCommand</span><span class="w">
</span></code></pre></div></div><h1 id="一个展示图像差异的脚本">一个展示图像差异的脚本</h1><p>这个脚本可展示 2 个序列的 Y/UV 差异，是后续重新改写的，增加了简单的交互功能，发给其他同事用会更方便一点。</p><p><strong>解释生成差异图像的滤镜命令</strong></p><ol><li><code class="language-plaintext highlighter-rouge">format=yuva420p</code>：将输入视频格式转换为 YUVA420P，这是一个包含透明度通道的 YUV 格式。</li><li><code class="language-plaintext highlighter-rouge">lut=c1=0:c2=0:c3=128</code>：使用查找表 (LUT) 滤镜，将 U 和 V 分量设置为 0，透明度通道设置为 128。这样可以突出显示 Y 分量。</li><li><code class="language-plaintext highlighter-rouge">negate</code>：对视频进行反相处理，使得差异更加明显。</li><li><code class="language-plaintext highlighter-rouge">blend=all_mode=difference:all_opacity=1</code>：将两个视频帧进行差异混合，显示出两个视频帧之间的差异。</li></ol><p>通过这些滤镜，脚本能够生成两个视频序列的 Y/UV 差异图像，并将其传递给 ffplay 进行显示。</p><p><img src="/assets/images/2024-12-20-15-54-08.png" alt="" /></p><div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#################### para part ####################</span><span class="w">
</span><span class="kr">Param</span><span class="w"> 
</span><span class="p">(</span><span class="w">
    </span><span class="nv">$parent_f0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./ResultRC_2023_11_01_0000_NO_FBC"</span><span class="p">,</span><span class="w"> 
    </span><span class="nv">$parent_f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./ResultRC_2023_11_08_0444_FBC65"</span><span class="p">,</span><span class="w">
    </span><span class="nv">$yuv_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1920x1088"</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="c">#################### para part end ####################</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Get-Sequences</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$seqFolders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-ChildItem</span><span class="w"> </span><span class="nv">$parent_f0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Where-Object</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="o">.</span><span class="nf">PSIsContainer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Select-Object</span><span class="w"> </span><span class="nt">-ExpandProperty</span><span class="w"> </span><span class="nx">Name</span><span class="w">

    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Available sequences:"</span><span class="w">
    </span><span class="kr">for</span><span class="w"> </span><span class="p">(</span><span class="nv">$i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="o">-lt</span><span class="w"> </span><span class="nv">$seqFolders</span><span class="o">.</span><span class="nf">Count</span><span class="p">;</span><span class="w"> </span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"</span><span class="nv">$i</span><span class="s2">. </span><span class="si">$(</span><span class="nv">$seqFolders</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">)</span><span class="s2">"</span><span class="w">
    </span><span class="p">}</span><span class="w">

    </span><span class="bp">$input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Read-Host</span><span class="w"> </span><span class="s2">"Enter the sequence number (or 'q' to quit)"</span><span class="w">

    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="bp">$input</span><span class="w"> </span><span class="o">-eq</span><span class="w"> </span><span class="s1">'q'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="kr">exit</span><span class="w">
    </span><span class="p">}</span><span class="w">

    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="bp">$input</span><span class="w"> </span><span class="o">-ge</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-and</span><span class="w"> </span><span class="bp">$input</span><span class="w"> </span><span class="o">-lt</span><span class="w"> </span><span class="nv">$seqFolders</span><span class="o">.</span><span class="nf">Count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="kr">return</span><span class="w"> </span><span class="nv">$seqFolders</span><span class="p">[</span><span class="bp">$input</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Invalid input. Please enter a valid sequence number or 'q' to quit."</span><span class="w">
        </span><span class="kr">return</span><span class="w"> </span><span class="bp">$null</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">do</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$selectedSeq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Sequences</span><span class="w">

    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$selectedSeq</span><span class="w"> </span><span class="o">-ne</span><span class="w"> </span><span class="bp">$null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nv">$sw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="nv">$sh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="nv">$speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="w">

        </span><span class="nv">$label0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"NO FBC"</span><span class="w">
        </span><span class="nv">$label1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FBC 65 percent"</span><span class="w">
        </span><span class="nv">$label2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Y_difference"</span><span class="w">
        </span><span class="nv">$label3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"UV_difference"</span><span class="w">

        </span><span class="bp">$input</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-i </span><span class="se">`"</span><span class="nv">$parent_f0</span><span class="s2">/</span><span class="nv">$selectedSeq</span><span class="s2">/</span><span class="nv">$selectedSeq</span><span class="se">`_</span><span class="s2">cbr_2M.h265</span><span class="se">`"</span><span class="s2">"</span><span class="w"> 
        </span><span class="bp">$input</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-i </span><span class="se">`"</span><span class="nv">$parent_f1</span><span class="s2">/</span><span class="nv">$selectedSeq</span><span class="s2">/</span><span class="nv">$selectedSeq</span><span class="se">`_</span><span class="s2">cbr_2M.h265</span><span class="se">`"</span><span class="s2">"</span><span class="w"> 

        </span><span class="nv">$label_font_common_cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fontfile=simhei.ttf:fontsize=</span><span class="si">$(</span><span class="nv">$sw</span><span class="n">/50</span><span class="p">):</span><span class="n">fontcolor</span><span class="o">=</span><span class="n">red</span><span class="s2">"

        </span><span class="nv">$cmd_ffmpeg_part</span><span class="s2"> = "</span><span class="o">.</span><span class="nx">\ffmpeg.exe</span><span class="w"> </span><span class="bp">$input</span><span class="nx">0</span><span class="w"> </span><span class="bp">$input</span><span class="nx">1</span><span class="w"> </span><span class="nt">-filter_complex</span><span class="w"> </span><span class="se">`"</span><span class="nx">nullsrc</span><span class="o">=</span><span class="n">size</span><span class="o">=</span><span class="nv">$sw</span><span class="err">`</span><span class="n">x</span><span class="nv">$sh</span><span class="se">`:</span><span class="nx">rate</span><span class="o">=</span><span class="n">25</span><span class="p">[</span><span class="n">base</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="n">vp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="n">vp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">format</span><span class="o">=</span><span class="n">yuva420p</span><span class="p">,</span><span class="n">lut</span><span class="o">=</span><span class="n">c1</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">c2</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">c3</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span><span class="n">negate</span><span class="p">[</span><span class="n">v0yforcmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">format</span><span class="o">=</span><span class="n">yuva420p</span><span class="p">,</span><span class="n">lut</span><span class="o">=</span><span class="n">c1</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">c2</span><span class="o">=</span><span class="n">0</span><span class="p">[</span><span class="n">v1yforcmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">v1yforcmp</span><span class="p">][</span><span class="n">v0yforcmp</span><span class="p">]</span><span class="n">overlay</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="mi">2</span><span class="p">:</span><span class="n">vp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">format</span><span class="o">=</span><span class="n">yuva420p</span><span class="p">,</span><span class="n">lut</span><span class="o">=</span><span class="n">c0</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">c3</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span><span class="n">negate</span><span class="p">[</span><span class="n">v0uvforcmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">v</span><span class="p">]</span><span class="n">format</span><span class="o">=</span><span class="n">yuva420p</span><span class="p">,</span><span class="n">lut</span><span class="o">=</span><span class="n">c0</span><span class="o">=</span><span class="n">0</span><span class="p">[</span><span class="n">v1uvforcmp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">v1uvforcmp</span><span class="p">][</span><span class="n">v0uvforcmp</span><span class="p">]</span><span class="n">overlay</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="mi">3</span><span class="p">:</span><span class="n">vp</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">base</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="n">vp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">0</span><span class="p">[</span><span class="n">a</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="n">vp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="n">0</span><span class="p">[</span><span class="n">b</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="n">vp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="n">c</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">3</span><span class="p">:</span><span class="n">vp</span><span class="p">]</span><span class="n">overlay</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)[</span><span class="n">d</span><span class="p">];</span><span class="w"> </span><span class="p">[</span><span class="n">d</span><span class="p">]</span><span class="n">setpts</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="mi">25</span><span class="n">/</span><span class="nv">$speed</span><span class="p">)</span><span class="o">*</span><span class="n">PTS</span><span class="err">`</span><span class="s2">" -f avi -c:v rawvideo -pix_fmt yuv420p - | "</span><span class="w">

        </span><span class="nv">$cmd_ffplay_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">".\ffplay.exe -vf </span><span class="se">`"</span><span class="s2">drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="s2">text=%{frame_num}:x=(w-tw)/2:y=h-lh,drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="s2">text=</span><span class="nv">$label0</span><span class="se">`:</span><span class="s2">x=0:y=0,drawtext=</span><span class="nv">$label_font_common_cfg</span><span class="se">`:</span><span class="s2">text=</span><span class="nv">$label1</span><span class="se">`:</span><span class="s2">x=</span><span class="si">$(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">drawtext</span><span class="o">=</span><span class="nv">$label_font_common_cfg</span><span class="err">`</span><span class="p">:</span><span class="n">text</span><span class="o">=</span><span class="nv">$label2</span><span class="err">`</span><span class="p">:</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="n">y</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">),</span><span class="n">drawtext</span><span class="o">=</span><span class="nv">$label_font_common_cfg</span><span class="err">`</span><span class="p">:</span><span class="n">text</span><span class="o">=</span><span class="nv">$label3</span><span class="err">`</span><span class="p">:</span><span class="n">x</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sw</span><span class="n">/2</span><span class="p">):</span><span class="n">y</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nv">$sh</span><span class="n">/2</span><span class="p">)</span><span class="err">`</span><span class="s2">" -noframedrop -left 9999 -fs -"</span><span class="w">

        </span><span class="nv">$cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$cmd_ffmpeg_part</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$cmd_ffplay_part</span><span class="w">
        </span><span class="n">cmd</span><span class="w"> </span><span class="nx">/c</span><span class="w"> </span><span class="nv">$cmd</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="kr">while</span><span class="w"> </span><span class="p">(</span><span class="bp">$true</span><span class="si">)</span><span class="s2">
</span></code></pre></div></div><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://0qinghao.github.io" target="_blank">Qinghao Lin</a></li><li>本文链接：<a href="https://0qinghao.github.io/20230727-video-subjective-quality-demo/" target="_blank">https://0qinghao.github.io/20230727-video-subjective-quality-demo/</a></li><li>采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">《署名-非商业性使用-禁止演绎 4.0 国际》许可协议</a></li></ul></div></article><div class="share"></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/20230727-video-subjective-quality-demo/', clientID: '14d87e39600a8b712585', clientSecret: '19d9a7c7ab6449dfa69185fdcd5bb4b879c76adf', repo: 'blog-comments', owner: '0qinghao', admin: ['0qinghao'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://0qinghao.github.io/assets/search_data.json', searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>', noResultsText: 'No results found', limit: 30, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2020 <span title="Qinghao Lin">Qinghao Lin</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)">TOP</a></li></ul><a href="https://github.com/0qinghao/0qinghao.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://0qinghao.github.io/" title="首页" target="">首页</a></li><li> <a href="https://0qinghao.github.io/ja_page/" title="每日一词" target="">每日一词</a></li><li> <a href="https://0qinghao.github.io/categories/" title="分类" target="">分类</a></li><li> <a href="https://0qinghao.github.io/archives/" title="归档" target="">归档</a></li><li> <a href="https://0qinghao.github.io/open-source/" title="开源" target="">开源</a></li><li> <a href="https://0qinghao.github.io/links/" title="链接" target="">链接</a></li><li> <a href="https://0qinghao.github.io/about/" title="关于" target="">关于</a></li></ul><script async src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2020-06-16 </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function ($) { $('.geopattern').each(function () { $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
