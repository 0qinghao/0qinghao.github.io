<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>申请和使用 Google 云计算引擎配置 SS Server &mdash; 林间</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/primer-markdown/dist/user-content.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://0qinghao.github.io//20180227-google-cloud-engine-ss-server/"><link rel="alternate" type="application/atom+xml" title="林间" href="https://0qinghao.github.io//feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/favicon.ico"><meta property="og:title" content="申请和使用 Google 云计算引擎配置 SS Server"><meta name="keywords" content="google cloud, shadowsocks"><meta name="og:keywords" content="google cloud, shadowsocks"><meta name="description" content="Google Cloud Platform 的新用户可以获得 $300 赠金的一年使用权，使用这笔不菲的赠金，我们可以构建应用程序、搭建网站、存储数据、体验各种强大的 API。这次，我总结了使用 Google 云计算引擎搭建 SS 服务器，实现科学上网的过程，也算作为墙内使用谷歌云平台的第一步。"><meta name="og:description" content="Google Cloud Platform 的新用户可以获得 $300 赠金的一年使用权，使用这笔不菲的赠金，我们可以构建应用程序、搭建网站、存储数据、体验各种强大的 API。这次，我总结了使用 Google 云计算引擎搭建 SS 服务器，实现科学上网的过程，也算作为墙内使用谷歌云平台的第一步。"><meta property="og:url" content="https://0qinghao.github.io//20180227-google-cloud-engine-ss-server/"><meta property="og:site_name" content="林间"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2018-02-27"> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://0qinghao.github.io//" title="林间"><span class="octicon octicon-mark-github"></span> 林间</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://0qinghao.github.io//" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://0qinghao.github.io//ja_page/" class=" site-header-nav-item" target="" title="日语">日语</a> <a href="https://0qinghao.github.io//categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://0qinghao.github.io//archives/" class=" site-header-nav-item" target="" title="归档">归档</a> <a href="https://0qinghao.github.io//open-source/" class=" site-header-nav-item" target="" title="开源">开源</a> <a href="https://0qinghao.github.io//links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="https://0qinghao.github.io//about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="申请和使用 Google 云计"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collecleon-title"><h1 class="collection-header">申请和使用 Google 云计算引擎配置 SS Server</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2018/02/27 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://0qinghao.github.io//categories/#google cloud" title="google cloud">google cloud</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://0qinghao.github.io//categories/#shadowsocks" title="shadowsocks">shadowsocks</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 1942 字，约 6 分钟 </span></div></div></div><div class="column one-fourths mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths"><article class="article-content markdown-body"><p><a href="https://cloud.google.com/">Google Cloud Platform</a> 的新用户可以获得 $300 赠金的一年使用权，使用这笔不菲的赠金，我们可以构建应用程序、搭建网站、存储数据、体验各种强大的 API。这次，我总结了使用 Google 云计算引擎搭建 SS 服务器，实现科学上网的过程，也算作为墙内使用谷歌云平台的第一步。</p><h1 id="科学上网的基本原理">科学上网的基本原理</h1><p><img src="/assets/images/2020-07-06-19-36-36.png" alt="" /></p><p>我们只需要一个能够访问墙外目标地址的代理服务器。本地设备向服务器发送访问目标地址的请求，服务器收到请求后访问目标并将结果回传给本地设备。</p><p>我们是使用 Shadowsocks（简称 SS，中文名影梭）来配置服务器的，所以一般把这个服务器称为 SS 服务器。谷歌云平台提供的位于国外的云计算引擎可以用来搭建 SS 服务器。</p><h1 id="申请试用谷歌云平台">申请试用谷歌云平台</h1><p><strong>*重要：你需要一张外币信用卡（VISA/MasterCard/JCB）</strong></p><p>首先，翻墙。突然有种鸡生蛋，蛋生鸡的矛盾，不过我相信你能找到一个免费试用的 VPN。</p><p>登录 <a href="https://cloud.google.com">谷歌云平台</a>，点击右上角的申请试用后进入申请界面。地区可以选择中国，不影响后续的申请。</p><p><img src="/assets/images/2020-07-06-19-36-51.png" alt="" /></p><p>账号类型选择 “个人”，填写名称地址电话。</p><p><img src="/assets/images/2020-07-06-19-37-03.png" alt="" /></p><p>付款方式填写你的外币信用卡（单币银联卡无效）。提交后信用卡会扣除 1 美金进行验证，验证完成即退回。</p><p><img src="/assets/images/2020-07-06-19-37-17.png" alt="" /></p><h1 id="创建计算引擎">创建计算引擎</h1><p>进入控制台，首先要求创建一个项目，尽量使用简单易记的项目名。</p><p>项目创建完成后，点击控制台左上角的 <code class="language-plaintext highlighter-rouge">☰</code> 打开导航栏，找到 <code class="language-plaintext highlighter-rouge">Compute Engine</code> → <code class="language-plaintext highlighter-rouge">VM 实例</code> ，点击 <code class="language-plaintext highlighter-rouge">创建</code> 开始创建一个计算引擎。</p><p><img src="/assets/images/2020-07-06-19-37-25.png" alt="" /></p><p><code class="language-plaintext highlighter-rouge">区域</code> 有 3 个比较好的选择：</p><pre><code class="language-nohighlight">asia-east1：位于台湾

asia-southeast1：位于新加坡

asia-northeast1：位于东京
</code></pre><p>从国内 ping 延迟都在 100ms 左右，它们的流量费用和硬件费用有细微的差别，在意的朋友可以在 <a href="https://cloud.google.com/compute/pricing">这里</a> 查询。</p><p><code class="language-plaintext highlighter-rouge">机器类型</code> 可以选择最小的微型（1 个共享 vCPU，0.6GB 内存）以节省硬件费用，单作为 SS 服务器该配置已经足够。</p><p>其他设置可以保持默认。点击 <code class="language-plaintext highlighter-rouge">创建</code> 。</p><p><img src="/assets/images/2020-07-06-19-37-31.png" alt="" /></p><h1 id="配置-ss-服务器">配置 SS 服务器</h1><p>创建完成后可以看到分配给实例的 <code class="language-plaintext highlighter-rouge">外部 IP</code> ，请牢记。</p><p>点击云引擎后面的 <code class="language-plaintext highlighter-rouge">SSH</code> ，远程连接该主机，进行配置。</p><p><img src="/assets/images/2020-07-06-19-37-36.png" alt="" /></p><p>这里使用 <a href="https://teddysun.com/358.html">秋水逸冰</a> 大大的 SS 服务器配置脚本。</p><p>依次输入下面三条指令：</p><pre><code class="language-nohighlight">wget --no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/wjk199511140034/ss-onekeyinstall/master/shadowsocks.sh

sudo chmod +x shadowsocks.sh

sudo ./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log
</code></pre><p>第三条指令运行后即进入配置过程，需要根据提示输入几项信息。</p><p>Please input password for shadowsocks-libev：输入 <code class="language-plaintext highlighter-rouge">密码</code> ，请牢记</p><p>Please enter a port for shadowsocks-libev：输入 SS <code class="language-plaintext highlighter-rouge">服务器端口号</code> ，请牢记</p><p>Which cipher you’d select：选择一种 <code class="language-plaintext highlighter-rouge">加密方式</code> ，请牢记</p><p>按任意键开始执行脚本，等待脚本运行完毕。</p><p><img src="/assets/images/2020-07-06-19-37-43.png" alt="" /></p><h1 id="创建防火墙规则">创建防火墙规则</h1><p>点击控制台左上角的 <code class="language-plaintext highlighter-rouge">☰</code> 打开导航栏，找到 <code class="language-plaintext highlighter-rouge">VPC 网络</code> → <code class="language-plaintext highlighter-rouge">防火墙规则</code> ，点击 <code class="language-plaintext highlighter-rouge">创建防火墙规则</code> 创建如下 2 个规则。</p><ul><li>入站规则</li></ul><p><code class="language-plaintext highlighter-rouge">流量方向</code> ：入站</p><p><code class="language-plaintext highlighter-rouge">目标</code> ：网络中的所有实例</p><p><code class="language-plaintext highlighter-rouge">来源 IP 地址范围</code> ：0.0.0.0/0</p><p><code class="language-plaintext highlighter-rouge">协议和端口</code> ：全部允许</p><p>其他部分可以保持默认，这条规则表示允许所有 ip / 端口的所有协议入站。</p><ul><li>出站规则</li></ul><p><code class="language-plaintext highlighter-rouge">流量方向</code> ：出站</p><p><code class="language-plaintext highlighter-rouge">目标</code> ：网络中的所有实例</p><p><code class="language-plaintext highlighter-rouge">来源 IP 地址范围</code> ：0.0.0.0/0</p><p><code class="language-plaintext highlighter-rouge">协议和端口</code> ：全部允许</p><p>其他部分可以保持默认，这条规则表示允许所有协议出站到所有 ip / 端口。</p><p><img src="/assets/images/2020-07-06-19-37-49.png" alt="" /></p><p>至此，SS 服务器部署完毕。你可以关闭你不稳定的试用版 VPN，准备开始正确地科学上网了。</p><h1 id="使用-ss-客户端">使用 SS 客户端</h1><p>这里仅以 Windows 客户端为例，Android 端很相似。Debian 平台使用 SS 客户端则需要进行一些配置，将另外做一次总结。</p><p>可以在 GitHub 下载到 Windows 平台的 <a href="https://github.com/shadowsocks/shadowsocks-windows/releases">SS 客户端</a>。</p><p>如果你无法打开 GitHub，可以点击 <a href="https://share.weiyun.com/edaa2c5f08aa5169c2be5c6a9f59662d">这里</a>，前往微云下载，但不保证是最新版本。</p><p>请将可执行程序放置在合适的文件夹内，运行后会在程序同一目录下产生配置文件，如果随便放置容易显得杂乱。</p><p>第一次打开 SS 客户端会主动要求编辑服务器。填入你的 <code class="language-plaintext highlighter-rouge">外部 IP</code> <code class="language-plaintext highlighter-rouge">密码</code> <code class="language-plaintext highlighter-rouge">服务器端口号</code> <code class="language-plaintext highlighter-rouge">加密方式</code> ，其他设置可以保持默认。</p><p><img src="/assets/images/2020-07-06-19-37-57.png" alt="" /></p><p>最后，右击任务栏的小图标，勾选 <code class="language-plaintext highlighter-rouge">启用系统代理</code> 。系统代理模式选择 <code class="language-plaintext highlighter-rouge">PAC 模式</code> ，这样 SS 会自动使用代理访问墙外站点，不需要另外安装浏览器的代理插件。</p><p><img src="/assets/images/2020-07-06-19-38-02.png" alt="" /></p><h1 id="参考资料">参考资料</h1><p><a href="https://teddysun.com/358.html">Debian 下 shadowsocks-libev 一键安装脚本</a></p><p><a href="https://teddysun.com/399.html">Shadowsocks Troubleshooting</a></p><p><a href="http://blog.021xt.cc/archives/98">Shadowsocks 原理和搭建</a></p><p><a href="https://51.ruyo.net/2144.html">Google Cloud 服务免费申请试用以及使用教程</a></p><p>感谢你阅读文章！</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://0qinghao.github.io/" target="_blank">Qinghao Lin</a></li><li>本文链接：<a href="https://0qinghao.github.io//20180227-google-cloud-engine-ss-server/" target="_blank">https://0qinghao.github.io//20180227-google-cloud-engine-ss-server/</a></li><li>采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">《署名-非商业性使用-禁止演绎 4.0 国际》许可协议</a></li></ul></div></article><div class="share"></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/20180227-google-cloud-engine-ss-server/', clientID: '14d87e39600a8b712585', clientSecret: '19d9a7c7ab6449dfa69185fdcd5bb4b879c76adf', repo: 'blog-comments', owner: '0qinghao', admin: ['0qinghao'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://0qinghao.github.io//assets/search_data.json', searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>', noResultsText: 'No results found', limit: 30, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2020 <span title="Qinghao Lin">Qinghao Lin</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)">TOP</a></li></ul><a href="https://github.com/0qinghao/0qinghao.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://0qinghao.github.io//" title="首页" target="">首页</a></li><li> <a href="https://0qinghao.github.io//ja_page/" title="日语" target="">日语</a></li><li> <a href="https://0qinghao.github.io//categories/" title="分类" target="">分类</a></li><li> <a href="https://0qinghao.github.io//archives/" title="归档" target="">归档</a></li><li> <a href="https://0qinghao.github.io//open-source/" title="开源" target="">开源</a></li><li> <a href="https://0qinghao.github.io//links/" title="链接" target="">链接</a></li><li> <a href="https://0qinghao.github.io//about/" title="关于" target="">关于</a></li></ul><script async src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2020-06-16 </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/0qinghao/0qinghao.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function ($) { $('.geopattern').each(function () { $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
